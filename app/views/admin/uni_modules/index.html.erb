<% if request.query_parameters["search"].present?%>
<% provide(:title,  "\"" + request.query_parameters["search"] +"\"" + ' - Modules') %>
<% else %>
<% provide(:title, 'Modules') %>
<% end %>
<header class="header index-header-area">
   <h1 id="page-title">Modules</h1>
   <div class="header__actions">
      <a class="button" href="%3C%=%20new_admin_uni_module_path%20%%3E"><i aria-hidden='true' class='fa fa-plus'></i>&nbsp;&nbsp;New uni module</a>
   </div>
</header>
<% if @uni_modules.size > 0 %>
<div class="table-responsive">
   <table aria-labelledby="page-title" class="collection-data table">
      <thead>
         <tr class="table-header-fields">
         <td><input type="checkbox"></td>
            <% sorting_columns = {"name" => "Name", "code" => "Code"} %>
            <% if request.query_parameters["search"].present?%>
              <%= render partial: "admin/layouts/index_sorting", locals: {sorting_columns: sorting_columns, searching: true, per_page: @per_page} %>
            <% else %>
              <%= render partial: "admin/layouts/index_sorting", locals: {sorting_columns: sorting_columns, searching: false, per_page: @per_page} %>
            <% end %>

            <th class="cell-label cell-label--string cell-label--false" scope="col">Semester</th>
            <th class="cell-label cell-label--string cell-label--false" scope="col">Available actions</th>
         </tr>
      </thead>
      <%= will_paginate %><%@uni_modules.each do |uni_module| %>
      <tbody>
         <tr class="table__row" data-url="<%= edit_admin_uni_module_path(uni_module) %>" role="link" tabindex="0">
         <td class="no-link"><input type="checkbox"></td>
            <td class="cell-data cell-data--string"><%= uni_module.name %></td>
            <td class="cell-data cell-data--string"><%= uni_module.code %></td>
            <td class="cell-data cell-data--string"><%= make_semester_nice uni_module.semester %></td>
            <td>
               <div class="col-md-3"><a class="action-edit" href="<%= edit_admin_uni_module_path(uni_module) %>"><i class="fa fa-pencil" aria-hidden="true" ></i>&nbsp;&nbspEdit</a></div>
               <div class="col-md-3"><%= link_to "<i class='fa fa-external-link' aria-hidden='true'></i> View".html_safe, uni_module, method: :get, target: :blank %></div>
               <div class="col-md-3"><%= link_to "<i class='fa fa-trash' aria-hidden='true'></i> Delete".html_safe, admin_uni_module_path(uni_module), method: :delete,
                  data: { confirm: "Are you sure?" } , class: "table__action--destroy" %></div>
            </td>
         </tr>
         <%end %>
      </tbody>
   </table>
   <%= will_paginate @uni_modules %>

              <%= render partial: "admin/layouts/per_page", locals: {sort_by: @sort_by, order: @order, per_page: @per_page, search_query: @search_query} %>


</div>
<% elsif request.query_parameters["search"].present?%>
<h4 style="margin-bottom:30px;">Unfortunately, we couldn't find any modules related to your search query.</h4>

<% else %>
<h4 style="margin-bottom:30px;">No modules found</h4> 
<% end %>