<%#
   # Application Layout
   
   This view template is used as the layout
   for every page that Administrate generates.
   
   By default, it renders:
   - Sidebar for navigation
   - Content for a search bar
     (if provided by a `content_for` block in a nested page)
   - Flashes
   - Links to stylesheets and Javascripts
   %>
<!DOCTYPE html>
<html lang="<%= I18n.locale %>">
   <head>
      <meta charset="utf-8" />
      <meta name="ROBOTS" content="NOODP" />
      <meta name="viewport" content="initial-scale=1" />
      <title><%= content_for(:title) %> - Admin | Modulect</title>
      <%= stylesheet_link_tag 'administrate/application' %>
      <%= javascript_include_tag 'administrate/application' %>
      <script src="https://use.fontawesome.com/bbc851b668.js"></script>
      <%= favicon_link_tag 'favicon.ico' %>
      <%= csrf_meta_tags %>
      <script>
         var $=jQuery.noConflict();
         
         $(document).ready(function(){
          setTimeout(fade_out, 5000);
             function fade_out() {
               $("#flash-container").fadeOut().empty();
               $("#flash-container").css("margin-bottom", "0px");
             }
         });
         
      </script>
   </head>
   <%= render 'header' %>
   <div id="wrapper">
      <!-- Sidebar -->
      <div id="sidebar-wrapper">
         <ul class="sidebar-nav">
            <li class="sidebar-brand">
               <a href="/admin" id="sidebar-title">
               Admin Dashboard
               </a>
            </li>
            <li class="sidebar-brand" style="margin-top:-10px;font-size:13px;line-height:normal; color:#fff;text-indent:0px;    padding-left: 20px;height:inherit;padding-bottom: 25px;
               border-bottom: 1px solid #888888;">
               Department: <%= Department.find(current_user.department_id).name %>
            </li>
            <li class="menu-item"><%= link_to '<i class="fa fa-home" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Home'.html_safe, admin_path %></li>
            <% Administrate::Namespace.new(namespace).resources.each do |resource| %>
            <li class="menu-item">
               <% if [:uni_modules, :courses, :departments, :users, :faculties].include? resource%>
               <% icons = {"Courses" => "fa fa-graduation-cap", "Departments" => "fa fa-building", "Faculties" => "fa fa-university", "Uni Modules" => "fa fa-pencil-square", "Users" => "fa fa-users"} %>
               <%= link_to(
                  ('<i class="' + icons[display_resource_name(resource)] + '" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;' + display_resource_name(resource)).html_safe,
                  [namespace, resource]
                  ) %>
               <% end%>
            </li>
            <% end %>
            <li class="menu-item no-desktop"><%= link_to "<i class='fa fa-sign-out' aria-hidden='true'></i>&nbsp;&nbsp;&nbsp;Log out".html_safe, logout_path, method: "delete" %></li>
         </ul>
      </div>
      <!-- /#sidebar-wrapper -->
      <!-- Page Content -->
      <div id="page-content-wrapper" style="padding-top:7px;">
         <div class="container-fluid">
            <div class="row">
               <div class="col-lg-12">
                  <main role="main">
                     <%= render "flashes" -%>
                     <div class="no-desktop-search">
                        <%= content_for(:search) %>
                     </div>
                     <%= yield %>
                     <div class="text-center" style="font-size:12px;margin-top:20px;">Modulect for KCL by Recursive Husky</div>
                  </main>
               </div>
            </div>
         </div>
      </div>
      <!-- /#page-content-wrapper -->
   </div>
   <!-- /#wrapper -->
   <!-- Menu Toggle Script -->
   <script>
      $("#menu-toggle").click(function(e) {
          e.preventDefault();
          $("#wrapper").toggleClass("toggled");
      });
   </script>
   </body>
</html>